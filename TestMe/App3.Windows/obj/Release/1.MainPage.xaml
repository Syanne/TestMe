<Page x:ConnectionId='1'
    x:Class="Test_me_alfa.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Test_me_alfa"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ad="using:AdDuplex.Universal.Controls.Win.XAML"
    mc:Ignorable="d" RequestedTheme="Dark"
                        
                             
    RenderTransformOrigin="0.5,0.5" 
    CompositeMode="SourceOver"
    NavigationCacheMode="Required"    
    >

    <Page.Resources>
        <CollectionViewSource x:Name="cvsMain" IsSourceGrouped="true" ItemsPath="group"/>
        <x:String x:Key="AppName">Тесты</x:String>
    </Page.Resources>
	<Page.BottomAppBar>
		<AppBar Background="#FF1FBFBA" BorderBrush="{x:Null}" Height="90" IsSticky="True" IsOpen="True">
            <GridView HorizontalAlignment="Center" Height="90">

                <AppBarButton x:ConnectionId='2' HorizontalAlignment="Center" 
					VerticalAlignment="Center" 
					Label="Новые тесты"
					                           
					RequestedTheme="Dark" 
					Margin="5, 0"
					Foreground="#FFEEEEEE" 
					Icon="Comment" 
					ToolTipService.ToolTip="Оставить отзыв и поставить оценку" Height="85"/>
				<AppBarButton x:ConnectionId='3' Label="Результат" x:Name="Result" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" RequestedTheme="Dark"                              ToolTipService.ToolTip="Посмотреть результаты предыдуших тестов" Height="85">
					<AppBarButton.Icon>
						<SymbolIcon HorizontalAlignment="Center" Symbol="ShowResults" VerticalAlignment="Center" Height="25"/>
					</AppBarButton.Icon>
				</AppBarButton>
				<Image Source="Assets/logo150.png" Stretch="Fill" VerticalAlignment="Center" HorizontalAlignment="Center" Width="75" Height="75" Margin="0"/>
				<AppBarButton x:ConnectionId='4' HorizontalAlignment="Center" VerticalAlignment="Center" Label="О программе"                              RequestedTheme="Dark" Margin="0" Foreground="#FFEEEEEE" ToolTipService.ToolTip="Информация о программе и обновлениях" Height="85">

					<AppBarButton.Icon>
						<SymbolIcon Symbol="More" Width="40"/>
					</AppBarButton.Icon>
				</AppBarButton>
				<AppBarButton x:ConnectionId='5' Label="Выход" x:Name="Exit" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Width="100" Height="85" RequestedTheme="Dark"                              ToolTipService.ToolTip="Закрыть приложение">
					<AppBarButton.Icon>
						<SymbolIcon HorizontalAlignment="Center" Symbol="Cancel" VerticalAlignment="Center" Height="25"/>
					</AppBarButton.Icon>
				</AppBarButton>
			</GridView>
		</AppBar>
	</Page.BottomAppBar>

    <Grid x:Name="myGrid" Background="#FFEEEEEE" RequestedTheme="Light" >

        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid x:Name="topString">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120"/>
                <ColumnDefinition Width="355*"/>
                <ColumnDefinition Width="891*"/>
            </Grid.ColumnDefinitions>
            <TextBlock x:Name="pageTitle" Text="{StaticResource AppName}" Style="{StaticResource HeaderTextBlockStyle}" Grid.Column="1" 
					IsHitTestVisible="false" TextWrapping="NoWrap" VerticalAlignment="Bottom" Margin="0,0,79,40" FontFamily="Segoe UI" RequestedTheme="Light" SelectionHighlightColor="#FF7D7C7E" Foreground="Black" Grid.ColumnSpan="2"/>
        </Grid>


        <local:VariableGridView x:ConnectionId='6' 
						x:Name="gvMain" 
						AutomationProperties.AutomationId="ItemGridView"
						AutomationProperties.Name="Grouped Items"
						Grid.Row="1" 
						Padding="116,10,40,100" 
                        Margin="15,0"
						ItemsSource="{Binding Source={StaticResource cvsMain}}" 
						                            
						SelectionMode="None"
						IsSwipeEnabled="false"
						IsItemClickEnabled="True"
						RequestedTheme="Light" 
                        VerticalAlignment="Center"
                        ScrollViewer.HorizontalScrollBarVisibility="Hidden">

            <local:VariableGridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </local:VariableGridView.ItemsPanel>

            <local:VariableGridView.ItemTemplate>
                <DataTemplate>
                    <Grid HorizontalAlignment="Left" x:Name="gt">
                        <Border Background="#1fbfba">
                            <Image Source="{Binding ImageSrc}" Stretch="Fill" />
                        </Border>
                        <StackPanel VerticalAlignment="Bottom">
                            <StackPanel.Background>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Offset="0" Color="#02242424"/>
                                    <GradientStop Color="#8C1D2020" Offset="0.85"/>
                                </LinearGradientBrush>
                            </StackPanel.Background>
                            <TextBlock x:Name="tBlock" Text="{Binding Name}" Foreground="White" Style="{StaticResource TitleTextBlockStyle}" Margin="15">
                            </TextBlock>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </local:VariableGridView.ItemTemplate>

            <local:VariableGridView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid Margin="1,10,10,15">
                                <Button x:ConnectionId='7' Style="{StaticResource TextBlockButtonStyle}"                     >
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding GroupName}" Margin="3,-7,10,10" Style="{StaticResource SubheaderTextBlockStyle}" IsTapEnabled="False" IsDoubleTapEnabled="False" IsHoldingEnabled="False" >
                                            <ToolTipService.ToolTip>
                                                <TextBlock Text="Нажмите сюда, чтобы посмотреть все тесты"/>
                                            </ToolTipService.ToolTip>
                                        </TextBlock>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>

                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0" ItemWidth="160" ItemHeight="160" MaximumRowsOrColumns="4"/>
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                </GroupStyle>

            </local:VariableGridView.GroupStyle>
            
        </local:VariableGridView>

        <ad:AdControl x:Name="adDuplexAd"
                AppId="128767"
                Size="728x90"
                      VerticalAlignment="Bottom"
                      Margin="0, 0, 0, 85"
                      Grid.Row="1"
                />

        <!--<GridView Name="Calendar" Height="90" Width="728" Foreground="{x:Null}" Tapped="Calendar_Tapped" BorderBrush="{x:Null}" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,85" Padding="0" Grid.Row="1">
        	<GridView.Background>
        		<ImageBrush Stretch="Fill" ImageSource="Assets/calendar.png"/>
        	</GridView.Background>
        </GridView>-->
        <!--<Button  ">
            
        </Button>-->
        <!--<Button IsEnabled="False" x:Name="comm" Click="comm_Click" VerticalAlignment="Bottom" HorizontalAlignment="Center" Width="74" Height="72" Margin="648,0,644,7" Grid.Row="1" Foreground="{x:Null}" Background="{x:Null}" BorderBrush="{x:Null}" >-->
        <!--</Button> -->

    </Grid>
</Page>

